<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>qlinks - Quick Links</title>

    <!-- almighty jquery -->
    <script src="/lib/jquery/jquery-3.5.1.slim.min.js"></script>

    <!-- popper -->
    <script src="/lib/popper/popper.min.js"></script>

    <!-- bootstrap -->
    <script src="/lib/bootstrap/4.5.2/bootstrap.min.js"></script>
    <link href="/lib/bootstrap/4.5.2/bootstrap.min.css" rel="stylesheet">

    <!-- babel -->
    <script src="/lib/babel/7/babel.min.js"></script>

    <link href='https://fonts.googleapis.com/css?family=Archivo' rel='stylesheet'>

    <!-- almighty react
<script src="/lib/react/16/react.production.min.js"></script>
<script src="/lib/react/16/react-dom.production.min.js"></script>
-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>


    <link href="/css/index.css" rel="stylesheet">
    <link href="/css/master.css" rel="stylesheet">
    <link href="/css/nav.css" rel="stylesheet">

    <script src="/js/components/Login.jsx" type='text/babel'></script>
    <script src="/js/components/Price.jsx" type='text/babel'></script>
    <script src="/js/components/Nav.jsx" type='text/babel'></script>
    <script src="/js/components/Rating.jsx" type='text/babel'></script>
    <script src="/js/components/ProductShort.jsx" type='text/babel'></script>
    <script src="/js/components/Shorts.jsx" type='text/babel'></script>
    <script src="/js/components/ProductDetailed.jsx" type='text/babel'></script>
    <script src="/js/components/Home.jsx" type='text/babel'></script>

    <script src="/js/index.js"></script>
</head>
<body>
<!-- index -->
<div id="root"></div>
<script type="text/babel">
    class App extends React.Component {
        constructor(props) {
            super(props);
            this.addProduct = this.addProduct.bind(this);
            this.remProduct = this.remProduct.bind(this);
            this.setProducts = this.setProducts.bind(this);
        }

        state = {
            "cart": localStorage && localStorage.getItem(MEM_KEYS.STATE_CART)
                ? JSON.parse(localStorage.getItem(MEM_KEYS.STATE_CART)) :
                {
                    quantity: {},
                    total: 0,
                    products: {}
                },
            products: []
        }

        setProducts = (products) => {
            if (products) {
                const newState = {...this.state, products: products};
                this.setState(newState);
            }
        }

        addProduct(product, quantity) {
            const cart = {...this.state.cart};
            if (!cart.quantity[product.id]) {
                cart.quantity[product.id] = Number.parseInt(quantity);
                cart.products[product.id] = {...product};
            } else {
                cart.quantity[product.id] = cart.quantity[product.id] + Number.parseInt(quantity);
            }
            cart.total = cart.total + Number.parseInt(quantity);
            const newState = {...this.state, cart: cart};
            if (localStorage) {
                localStorage.setItem(MEM_KEYS.STATE_CART, JSON.stringify(cart))
            }
            this.setState(newState);
            showSuccess(`${product.name} added successfully!`);
        }

        remProduct(product, quantity) {
            const cart = {...this.state.cart};
            if (cart.quantity[product.id]) {
                cart.quantity[product.id] = cart.quantity[product.id] - Number.parseInt(quantity);
                if (cart.quantity[product.id] <= 0) {
                    delete cart.quantity[product.id];
                    delete cart.products[product.id];
                }
                cart.total = cart.total - Number.parseInt(quantity);
                cart.total = cart.total <= 0 ? 0 : cart.total;
                const newState = {...this.state, cart: cart};
                if (localStorage) {
                    localStorage.setItem(MEM_KEYS.STATE_CART, JSON.stringify(cart))
                }
                this.setState(newState);
            }
        }

        render = () => {
            return (
                <div className="center">
                    <Home data={this.state}
                          functions={{
                              addProduct: this.addProduct,
                              remProduct: this.remProduct
                          }}/>
                </div>
            )
        }
    }

    ReactDOM.render(<App/>, document.getElementById('root'));
    fillLogo();
</script>


<div id="snackbar"></div>
</body>
</html>

<!--
Notes

div {
  width: 300px;
  border: 15px solid green;
  padding: 50px; // between border and content
  margin: 20px; // If this is the content, then allowed space to border (outside)


Border Ki bhi Border
outline-style
    dotted - Defines a dotted outline
    dashed - Defines a dashed outline
    solid - Defines a solid outline
    double - Defines a double outline
    groove - Defines a 3D grooved outline
    ridge - Defines a 3D ridged outline
    inset - Defines a 3D inset outline
    outset - Defines a 3D outset outline
    none - Defines no outline
    hidden - Defines a hidden outline
outline-color
outline-width
outline-offset
outline

}


-->